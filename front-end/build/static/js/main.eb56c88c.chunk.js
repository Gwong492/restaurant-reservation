(this["webpackJsonpstarter-restaurant-reservation-front-end"]=this["webpackJsonpstarter-restaurant-reservation-front-end"]||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(18),c=a.n(s),i=a(5),l=a(7),o=a(0);var u=function(){return Object(o.jsx)("nav",{className:"navbar navbar-dark align-items-start p-0",children:Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column p-0",children:[Object(o.jsx)(l.b,{className:"navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0",to:"/",children:Object(o.jsx)("div",{className:"sidebar-brand-text mx-3",children:Object(o.jsx)("span",{children:"Periodic Tables"})})}),Object(o.jsx)("hr",{className:"sidebar-divider my-0"}),Object(o.jsxs)("ul",{className:"nav navbar-nav text-light",id:"accordionSidebar",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/dashboard",children:[Object(o.jsx)("span",{className:"oi oi-dashboard"}),"\xa0Dashboard"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/search",children:[Object(o.jsx)("span",{className:"oi oi-magnifying-glass"}),"\xa0Search"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/reservations/new",children:[Object(o.jsx)("span",{className:"oi oi-plus"}),"\xa0New Reservation"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/tables/new",children:[Object(o.jsx)("span",{className:"oi oi-layers"}),"\xa0New Table"]})})]}),Object(o.jsx)("div",{className:"text-center d-none d-md-inline",children:Object(o.jsx)("button",{className:"btn rounded-circle border-0",id:"sidebarToggle",type:"button"})})]})})},b=a(2),d=a.n(b),j=a(4),m=a(3),p=a(11),h=/\d\d\d\d-\d\d-\d\d/,v=/\d\d:\d\d/;function f(e){return"".concat(e.getFullYear().toString(10),"-").concat((e.getMonth()+1).toString(10).padStart(2,"0"),"-").concat(e.getDate().toString(10).padStart(2,"0"))}function x(e){return e.match(h)[0]}function O(e){return e.match(v)[0]}function g(){return f(new Date)}function N(e){var t=e.split("-"),a=Object(m.a)(t,3),n=a[0],r=a[1],s=a[2],c=new Date(n,r-=1,s);return c.setMonth(c.getMonth()),c.setDate(c.getDate()+1),f(c)}function w(e){return e.reservation_date=x(e.reservation_date),e}function y(e){return Array.isArray(e)?e.map(w):w(e)}var _=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_BASE_URL||"http://localhost:5001",S=new Headers;function k(e,t,a){return T.apply(this,arguments)}function T(){return(T=Object(j.a)(d.a.mark((function e(t,a,n){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,a);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,r.json();case 8:if(!(s=e.sent).error){e.next=11;break}return e.abrupt("return",Promise.reject({message:s.error}));case 11:return e.abrupt("return",s.data);case 14:if(e.prev=14,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=19;break}throw console.error(e.t0.stack),e.t0;case 19:return e.abrupt("return",Promise.resolve(n));case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function C(){return(C=Object(j.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(_,"/reservations")),Object.entries(t).forEach((function(e){var t=Object(m.a)(e,2),a=t[0],r=t[1];return n.searchParams.append(a,r.toString())})),console.log("API Call listReservations"),e.next=5,k(n,{headers:S,signal:a},[]).then(y).then(y);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(_,"/reservations"),r={method:"POST",headers:S,body:JSON.stringify({data:t}),signal:a},console.log("API Call: createReservation",r),e.next=5,k(n,r,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(_,"/tables"),r={method:"POST",headers:S,body:JSON.stringify({data:t}),signal:a},console.log("API Call createTable: GET ".concat(n),r),e.next=5,k(n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return(I=Object(j.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(_,"/reservations/").concat(t)),console.log("API Call getReservationBySeat"),e.next=4,k(n,{signal:a},[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return U.apply(this,arguments)}function U(){return(U=Object(j.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(_,"/reservations?mobile_number=").concat(t)),console.log("API Call searchReservationByMobileNum"),e.next=4,k(n,{signal:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return M.apply(this,arguments)}function M(){return(M=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("API Call listTables"),a=new URL("".concat(_,"/tables")),e.next=4,k(a,{headers:S,signal:t},[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return q.apply(this,arguments)}function q(){return(q=Object(j.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(_,"/reservations/").concat(t),r={method:"GET",headers:S,signal:a},console.log("API Call readReservation: GET ".concat(n),r),e.next=5,k(n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a){return J.apply(this,arguments)}function J(){return(J=Object(j.a)(d.a.mark((function e(t,a,n){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(_,"/tables/").concat(t,"/seat"),s={method:"PUT",headers:S,body:JSON.stringify({data:{reservation_id:a}}),signal:n},console.log("API Call setTableReservation: PUT ".concat(r),s),e.next=5,k(r,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return H.apply(this,arguments)}function H(){return H=Object(j.a)(d.a.mark((function e(t,a){var n,r,s,c,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:void 0,r=i.length>3?i[3]:void 0,s="".concat(_,"/reservations/").concat(a),c={method:"PUT",headers:S,body:JSON.stringify({data:Object(p.a)(Object(p.a)({},t),n&&{status:n})}),signal:r},console.log("API Call updateReservation: PUT ".concat(s),c),e.next=7,k(s,c);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function V(e,t){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(_,"/reservations/").concat(t,"/status"),r={method:"PUT",headers:S,body:JSON.stringify({data:{status:"cancelled"}}),signal:a},console.log("API Call setReservationCancel: PUT ".concat(n),r),e.next=5,k(n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t,a){return K.apply(this,arguments)}function K(){return(K=Object(j.a)(d.a.mark((function e(t,a,n){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(_,"/tables/").concat(t,"/seat"),s={method:"DELETE",headers:S,body:JSON.stringify({data:{reservation_id:a}}),signal:n},console.log("API Call deleteTableReservation: DELETE ".concat(r),s),e.next=5,k(r,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}S.append("Content-Type","application/json");var z=function(e){var t=e.error;return t&&Object(o.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})};var Y=function(){var e=Object(i.h)(),t=Object(i.g)(),a=Object(n.useState)(g()),r=Object(m.a)(a,2),s=r[0],c=r[1],u=Object(n.useState)([]),b=Object(m.a)(u,2),p=b[0],h=b[1],v=Object(n.useState)([]),x=Object(m.a)(v,2),O=x[0],w=x[1],y=Object(n.useState)(null),_=Object(m.a)(y,2),S=_[0],k=_[1],T=Object(n.useState)(null),D=Object(m.a)(T,2),E=D[0],P=D[1],R=Object(n.useState)(null),A=Object(m.a)(R,2),I=A[0],F=A[1];function U(){var e=new AbortController;return console.log("Fetching Reservations for Date:",s),k(null),function(e,t){return C.apply(this,arguments)}({date:s},e.signal).then(h).catch(k),L(e.signal).then(w).catch(P),function(){return e.abort()}}function M(a){var n;a===g()&&(n=g()),1===a&&(n=N(s)),0===a&&(n=function(e){var t=e.split("-"),a=Object(m.a)(t,3),n=a[0],r=a[1],s=a[2],c=new Date(n,r-=1,s);return c.setMonth(c.getMonth()),c.setDate(c.getDate()-1),f(c)}(s)),c(n),t.push("".concat(e.pathname,"?date=").concat(n))}function X(){return(X=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Is this table ready to seat new guests? This cannot be undone.")){e.next=12;break}return e.prev=1,console.log("Table:".concat(t," is now Free")),e.next=5,G(t);case 5:U(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),F(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function q(){return(q=Object(j.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.blur(),!window.confirm("Do you want to cancel this reservation? This cannot be undone.")){e.next=13;break}return e.prev=2,e.next=5,V(a);case 5:return e.next=7,U();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),k(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(n.useEffect)((function(){var t=new URLSearchParams(e.search).get("date");c(t||g())}),[e]),Object(n.useEffect)(U,[s]);var B=p.filter((function(e){return"cancelled"!==e.status})).map((function(e){var t=N(e.reservation_date);return Object(o.jsx)("li",{className:"shadow-sm list-group-item",children:Object(o.jsxs)("div",{className:"d-flex row justify-content-between reservation-cards text-wrap",children:[Object(o.jsxs)("div",{className:"col-9",children:[Object(o.jsxs)("div",{className:"d-flex",children:[Object(o.jsxs)("h5",{className:"mr-3",children:[e.first_name," ",e.last_name]}),Object(o.jsx)("div",{className:"mb-1 align-self-center py-0 px-1 font-italic booked","data-reservation-id-status":e.reservation_id,children:e.status})]}),Object(o.jsx)("div",{className:"mt-1 font-weight-bold",children:e.reservation_time.slice(0,5)}),e.people>1?Object(o.jsxs)(o.Fragment,{children:[e.people," people"]}):Object(o.jsxs)(o.Fragment,{children:[e.people," person"]}),Object(o.jsx)("div",{className:"fs-5",children:Z(t)}),Object(o.jsx)("div",{className:"font-italic",children:e.mobile_number})]}),Object(o.jsxs)("div",{className:"d-flex col-3 flex-column align-items-end",children:[Object(o.jsxs)("div",{className:"",children:["ID: ",e.reservation_id]}),"seated"===e.status?Object(o.jsx)(o.Fragment,{}):Object(o.jsx)(l.b,{className:"btn submit-button mt-auto",to:"/reservations/".concat(e.reservation_id,"/seat"),children:"Seat"}),Object(o.jsxs)("div",{className:"d-flex mt-auto align-items-baseline",children:[Object(o.jsx)("a",{className:"mr-3 edit-button",href:"/reservations/".concat(e.reservation_id,"/edit"),children:"Edit"}),Object(o.jsx)("button",{className:"btn btn-outline-danger py-0 ml-1","data-reservation-id-cancel":e.reservation_id,onClick:function(t){return function(e,t){return q.apply(this,arguments)}(t,e.reservation_id)},children:"Cancel"})]})]})]})},e.reservation_id)})),J=O.map((function(e){return Object(o.jsx)("li",{className:"shadow-sm list-group-item",children:Object(o.jsxs)("div",{className:"d-flex row g-0 justify-content-between reservation-cards text-wrap",children:[Object(o.jsxs)("div",{className:"col-5",children:[Object(o.jsxs)("div",{className:"mb-1",children:["Table: ",e.table_name]}),Object(o.jsxs)("div",{className:"",children:["Capacity: ",e.capacity]})]}),Object(o.jsx)("div",{className:"col-4 px-1 align-self-center justify-content-center",children:null!=e.reservation_id?Object(o.jsx)("div",{className:"align-self-center text-muted","data-table-id-status":e.table_id,children:"Occupied"}):Object(o.jsx)("div",{className:"font-weight-bold align-self-center","data-table-id-status":e.table_id,children:"Free"})}),Object(o.jsx)("div",{className:"col-3 d-flex flex-column",children:e.reservation_id?Object(o.jsx)("div",{className:"justify-content-center d-flex",children:Object(o.jsx)("button",{className:"btn btn-danger align-self-center","data-table-id-finish":e.table_id,onClick:function(){return function(e){return X.apply(this,arguments)}(e.table_id)},children:"Finish"})}):Object(o.jsx)("div",{className:""})})]})},e.table_id)}));function Z(e){if(!e)return"Invalid Date";var t=new Date("".concat(e,"T00:00:00Z"));return isNaN(t)?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}return Object(o.jsxs)("main",{className:"container-fluid p-3",children:[Object(o.jsxs)("div",{className:"text-center mb-4",children:[Object(o.jsx)("h1",{className:"display-5 fw-bold",children:"Dashboard"}),Object(o.jsx)("p",{className:"fs-4",children:Z(s)}),Object(o.jsxs)("div",{className:"btn-group",children:[Object(o.jsx)("button",{onClick:function(){return M(0)},className:"btn submit-button",children:"Previous"}),Object(o.jsx)("button",{onClick:function(){return c(g())},className:"btn submit-button",children:"Today"}),Object(o.jsx)("button",{onClick:function(){return M(1)},className:"btn submit-button",children:"Next"})]}),Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"d-flex flex-column flex-md-row",children:[Object(o.jsxs)("ul",{className:"list-group mt-3 ml-3 flex-grow-1",children:[Object(o.jsxs)("div",{className:"row mx-2 justify-content-between",children:[Object(o.jsx)("h4",{children:"Reservations:"}),Object(o.jsx)("a",{href:"#tables",className:"d-md-none",children:"Tables"})]}),B]}),Object(o.jsxs)("ul",{id:"tables",className:"list-group mt-3 ml-3 flex-grow-1",children:[Object(o.jsx)("h4",{children:"Tables:"}),J]})]})})]}),Object(o.jsx)(z,{error:S}),Object(o.jsx)(z,{error:E}),Object(o.jsx)(z,{error:I})]})};var Q=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(null),c=Object(m.a)(s,2),u=c[0],b=c[1],p=Object(n.useState)([]),h=Object(m.a)(p,2),v=h[0],f=h[1],x=Object(n.useState)(!1),O=Object(m.a)(x,2),g=O[0],w=O[1],y=Object(i.h)(),_=Object(i.g)();function S(){return(S=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target,console.log(a.value),r(a.value),b(null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){var t=e.replace(/\D/g,"");return"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6,10))};function T(e){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new AbortController,e.prev=1,b(null),e.next=5,F(t,a.signal);case 5:n=e.sent,console.log("Fetched Reservations:",n),f(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Search failed:",e.t0.message),b(e.t0);case 14:return e.abrupt("return",(function(){return a.abort()}));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function D(e){if(!e)return"Invalid Date";var t=new Date("".concat(e,"T00:00:00Z"));return isNaN(t)?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}var E=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a){e.next=4;break}return b("Phone number is required."),e.abrupt("return");case 4:return n=k(a),console.log("Formatted Phone Number:",n),_.push("".concat(y.pathname,"?mobile_number=").concat(n)),e.next=9,T(n);case 9:w(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=v.map((function(e){var t=N(e.reservation_date);return Object(o.jsx)("li",{className:"shadow-sm list-group-item",children:Object(o.jsxs)("div",{className:"d-flex row justify-content-between reservation-cards text-wrap",children:[Object(o.jsxs)("div",{className:"col-9",children:[Object(o.jsxs)("div",{className:"d-flex",children:[Object(o.jsxs)("h5",{className:"mr-3",children:[e.first_name," ",e.last_name]}),Object(o.jsx)("div",{className:"mb-1 align-self-center py-0 px-1 font-italic booked","data-reservation-id-status":e.reservation_id,children:e.status})]}),Object(o.jsx)("div",{className:"mt-1 font-weight-bold",children:e.reservation_time.slice(0,5)}),e.people>1?Object(o.jsxs)(o.Fragment,{children:[e.people," people"]}):Object(o.jsxs)(o.Fragment,{children:[e.people," person"]}),Object(o.jsx)("div",{className:"fs-5",children:D(t)}),Object(o.jsx)("div",{className:"font-italic",children:e.mobile_number})]}),Object(o.jsxs)("div",{className:"d-flex col-3 flex-column align-items-end",children:[Object(o.jsxs)("div",{className:"",children:["ID: ",e.reservation_id]}),Object(o.jsx)(l.b,{className:"btn submit-button mt-auto",to:"/reservations/".concat(e.reservation_id,"/seat"),children:"Seat"}),Object(o.jsx)("a",{className:"mt-auto edit-button",href:"/reservations/".concat(e.reservation_id,"/edit"),children:"Edit"})]})]})},e.reservation_id)}));return Object(o.jsx)("main",{className:"helvetica",children:Object(o.jsxs)("div",{className:"d-flex-row mb-3 search-title align-items-center",children:[Object(o.jsx)("h4",{className:"date-title",children:"Search"}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("form",{className:"search-div",onSubmit:E,children:[Object(o.jsx)("input",{name:"mobile_number",placeholder:"Enter a customer's phone number",className:"search-input",onChange:function(e){return S.apply(this,arguments)},required:!0}),Object(o.jsx)("button",{className:"btn  submit-button ml-2 py-1",type:"submit",children:"Find"})]}),Object(o.jsx)("div",{className:"d-flex flex-column flex-md-row mt-2",children:Object(o.jsx)("ul",{className:"list-group list ml-3 flex-grow-1",children:P})}),g&&0===v.length?Object(o.jsx)("h5",{className:"alert alert-danger",children:"No reservations found"}):Object(o.jsx)(o.Fragment,{})]}),u?Object(o.jsx)("div",{children:Object(o.jsx)(z,{error:u})}):Object(o.jsx)("div",{})]})})},$=a(14);function ee(e){var t=e.reservation_date,a=e.reservation_time,n=e.people,r="".concat(t,"T").concat(a),s=new Date(r),c=(new Date).toISOString().split("T")[0],i=new Date,l=a.split(":").map(Number),o=Object(m.a)(l,2),u=60*o[0]+o[1];return console.log("Inputs:",{reservation_date:t,reservation_time:a,people:n}),t&&a&&n?t<c?(console.warn("Reservation must be for a future date."),"Reservation must be for a future date."):2===s.getDay()?(console.warn("The restaurant is closed on Tuesdays."),"The restaurant is closed on Tuesdays."):u<630||u>1290?(console.warn("Reservation time out of range."),"Reservation time must be between 10:30 AM and 9:30 PM."):s<i?(console.warn("Reservation must be for a future time."),"Reservation date and time must be in the future."):!n||isNaN(n)||Number(n)<=0?(console.warn("People count invalid."),"Number of people must be at least 1."):(console.log("Validation Passed."),null):(console.warn("Missing required fields."),"All fields are required.")}var te=function(e){var t=e.initialFormState,a=void 0===t?{}:t,r=e.status,s=Object(i.i)().reservation_id,c=Object(n.useState)({first_name:"",last_name:"",mobile_number:"",reservation_date:"",reservation_time:"",people:0}),l=Object(m.a)(c,2),u=l[0],b=l[1],h=Object(n.useState)(null),v=Object(m.a)(h,2),f=v[0],x=v[1],g=Object(n.useState)(!1),N=Object(m.a)(g,2),w=N[0],y=N[1],_=Object(i.g)();function S(e){var t=e.target,a=t.name,n=t.value;if(console.log("Field Changed: ".concat(a," => ").concat(n)),b((function(e){return Object(p.a)(Object(p.a)({},e),{},Object($.a)({},a,"people"===a?Number(n):n))})),w){var r=ee(Object(p.a)(Object(p.a)({},u),{},Object($.a)({},a,"people"===a?Number(n):n)));r?(console.warn("Validation Warning:",r),x(r)):x(null)}}function k(){return(k=Object(j.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("Form Submission Data:",u),y(!0),!(a=ee(Object(p.a)(Object(p.a)({},u),{},{people:Number(u.people)})))){e.next=8;break}return console.warn("Validation Error on Submit:",a),x(a),e.abrupt("return");case 8:if(x(null),e.prev=9,n=Object(p.a)(Object(p.a)({},u),{},{people:Number(u.people),reservation_time:O(u.reservation_time)}),"edit"!==r){e.next=17;break}return console.log("Updating Reservation..."),e.next=15,Z(n,s,r);case 15:e.next=20;break;case 17:return console.log("Creating Reservation..."),e.next=20,D(n);case 20:_.push("/dashboard?date=".concat(u.reservation_date)),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(9),console.error("API Error:",e.t0),z(e.t0);case 27:case"end":return e.stop()}}),e,null,[[9,23]])})))).apply(this,arguments)}function T(e){var t=e.label,a=e.name,n=e.type,r=void 0===n?"text":n,s=e.min,c=e.placeholder,i=void 0===c?null:c;return Object(o.jsxs)("label",{className:"form-components",children:[t,Object(o.jsx)("input",{name:a,type:r,min:s,onChange:S,value:u[a],placeholder:i,required:!0})]})}return Object(n.useEffect)((function(){a&&Object.keys(a).length>0&&b(Object(p.a)({},a))}),[a]),Object(o.jsxs)("main",{className:"helvetica align-content-center",children:[w&&f?Object(o.jsx)("div",{className:"alert alert-danger",children:f}):null,Object(o.jsxs)("form",{className:"reservation-form col",onSubmit:function(e){return k.apply(this,arguments)},children:[T({label:"First Name",name:"first_name",placeholder:"Enter First Name"}),T({label:"Last Name",name:"last_name",placeholder:"Enter Last Name"}),T({label:"Phone Number",name:"mobile_number",placeholder:"XXX-XXX-XXXX"}),T({label:"Date",name:"reservation_date",type:"date"}),T({label:"Time",name:"reservation_time",type:"time"}),T({label:"Number of people",name:"people",type:"number",min:1}),Object(o.jsxs)("div",{className:"buttons d-flex justify-content-between",children:[Object(o.jsx)("button",{className:"btn btn-outline-dark w-100",type:"button",onClick:function(){return _.goBack()},children:"Cancel"}),Object(o.jsx)("button",{className:"btn submit-button w-100 ml-2",type:"submit",children:"Submit"})]})]})]})};var ae=function(){return Object(o.jsxs)("main",{className:"helvetica",children:[Object(o.jsx)("h3",{className:"date-title m-3 form-title",children:"Create Reservation"}),Object(o.jsx)("div",{children:Object(o.jsx)(te,{status:"new"})})]})};var ne=function(){var e=Object(i.i)().reservation_id,t=Object(n.useState)(null),a=Object(m.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(null),l=Object(m.a)(c,2),u=l[0],b=l[1];return Object(n.useEffect)((function(){var t=new AbortController;function a(){return(a=Object(j.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,X(e,t.signal);case 3:(n=a.sent).reservation_date=x(n.reservation_date),n.reservation_time=O(n.reservation_time),s(n),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),"AbortError"!==a.t0.name&&(console.error("Error fetching reservation:",a.t0),b(a.t0.message||"Failed to fetch reservation details."));case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return t.abort()}}),[e]),u?Object(o.jsx)(z,{error:u}):r?Object(o.jsxs)("main",{className:"helvetica",children:[Object(o.jsx)("h3",{className:"date-title m-3 form-title",children:"Edit Reservation"}),Object(o.jsx)(te,{initialFormState:r,status:"edit"})]}):Object(o.jsx)("div",{className:"loading-spinner",children:"Loading reservation details..."})};var re=function(){var e=Object(i.i)().reservation_id,t=Object(i.g)(),a=Object(n.useState)({}),r=Object(m.a)(a,2),s=r[0],c=r[1],l=Object(n.useState)([]),u=Object(m.a)(l,2),b=u[0],p=u[1],h=Object(n.useState)(null),v=Object(m.a)(h,2),f=v[0],x=v[1],O=Object(n.useState)(null),g=Object(m.a)(O,2),N=g[0],w=g[1],y=Object(n.useState)(null),_=Object(m.a)(y,2),S=_[0],k=_[1],T=Object(n.useState)(null),C=Object(m.a)(T,2),D=C[0],E=C[1],P=Object(n.useState)(null),R=Object(m.a)(P,2),I=R[0],F=R[1];Object(n.useEffect)((function(){var t=new AbortController,a=function(){var a=Object(j.a)(d.a.mark((function a(){var n,r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,k(null),a.next=4,A(e,t.signal);case 4:return n=a.sent,c(n),a.next=8,L(t.signal);case 8:r=a.sent,p(r),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),"AbortError"!==a.t0.name&&(k(a.t0.message),w(a.t0.message));case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(){return a.apply(this,arguments)}}();return a(),function(){return t.abort()}}),[e]);var U=function(){var e=Object(j.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),f&&"select"!==f){e.next=3;break}return e.abrupt("return",E("Please select a table"));case 3:if(n=b.find((function(e){return Number(e.table_id)===Number(f)}))){e.next=7;break}return w("Invalid table selected."),e.abrupt("return");case 7:if(!n.reservation_id){e.next=10;break}return w("This table is already occupied."),e.abrupt("return");case 10:if(!(s.people>n.capacity)){e.next=13;break}return w("Table capacity (".concat(n.capacity,") is less than reservation size (").concat(s.people,").")),e.abrupt("return");case 13:return e.prev=13,console.log("Submitting Reservation ID: ".concat(s.reservation_id)),console.log("Selected Table ID: ".concat(f)),e.next=18,B(f,s.reservation_id);case 18:t.push("/dashboard?date=".concat(s.reservation_date)),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),console.error("Error seating reservation:",e.t0.message),F(e.t0.message||"Failed to seat reservation.");case 25:case"end":return e.stop()}}),e,null,[[13,21]])})));return function(t){return e.apply(this,arguments)}}(),M=b.length>0?b.map((function(e){return Object(o.jsxs)("option",{value:e.table_id,"data-capacity":e.capacity,children:[e.table_name," - ",e.capacity]},e.table_id)})):[];return Object(o.jsxs)("main",{children:[Object(o.jsx)("h4",{className:"mt-2 date-title",children:"Select Table"}),Object(o.jsx)("div",{className:"shadow-sm list-group-item",children:Object(o.jsxs)("div",{className:"d-flex row justify-content-between align-items reservation-cards",children:[Object(o.jsxs)("div",{className:"col-9",children:[Object(o.jsxs)("h5",{children:[s.first_name," ",s.last_name]}),Object(o.jsx)("div",{className:"mt-1 font-weight-bold",children:s.reservation_time}),Object(o.jsxs)("div",{children:[s.people," ",s.people>1?"people":"person"]}),Object(o.jsx)("div",{className:"fs-5",children:function(e){if(!e)return"Invalid Date";var t=new Date("".concat(e,"T00:00:00Z"));return isNaN(t)?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}(s.reservation_date)}),Object(o.jsx)("div",{className:"font-italic",children:s.mobile_number})]}),Object(o.jsx)("div",{className:"d-flex col-3 flex-column id",children:Object(o.jsxs)("div",{children:["ID: ",s.reservation_id]})})]})},s.reservation_id),Object(o.jsxs)("form",{onSubmit:U,children:[Object(o.jsxs)("select",{name:"table_id",value:f||"",onChange:function(e){var t=e.target;E(null),w(null),k(null);var a=t.value;if("select"===a)return E("Please select a table");var n=b.find((function(e){return Number(e.table_id)===Number(a)}));if(console.log("Selected Table:",n),!n)return w("Selected table not found.");var r=t.options[t.selectedIndex].getAttribute("data-capacity");return null!=n.reservation_id?w("This table is already occupied."):s.people>r?w("Reservation capacity is greater than table capacity."):void x(a)},className:"my-3",children:[Object(o.jsx)("option",{value:"select",children:"-- Select an Option --"}),M]}),Object(o.jsxs)("div",{className:"buttons d-flex justify-content-between",children:[Object(o.jsx)("button",{className:"btn btn-outline-dark w-100",type:"button",onClick:function(){return t.goBack()},children:"Cancel"}),Object(o.jsx)("button",{className:"btn submit-button w-100 ml-2",type:"submit",children:"Submit"})]})]}),S&&Object(o.jsxs)("div",{className:"mt-3 alert alert-danger",children:["Reservation Error: ",S]}),N&&Object(o.jsxs)("div",{className:"mt-3 alert alert-danger",children:["Table Error: ",N]}),D&&Object(o.jsxs)("div",{className:"mt-3 alert alert-danger",children:["Selection Error: ",D]}),I&&Object(o.jsxs)("div",{className:"mt-3 alert alert-danger",children:["Error: ",I]}),Object(o.jsx)(z,{error:I})]})};var se=function(){var e=Object(i.g)(),t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),l=Object(m.a)(c,2),u=l[0],b=l[1],p=Object(n.useState)(null),h=Object(m.a)(p,2),v=h[0],f=h[1],x=function(){var t=Object(j.a)(d.a.mark((function t(a){var n,s,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log("Submitting form - Table Name: ".concat(r," Capacity: ").concat(u)),n=new AbortController,r&&!(r.trim().length<2)){t.next=7;break}return console.warn("Table Name validation failed: Must be at least 2 characters long."),f("Table name must be at least 2 characters long."),t.abrupt("return");case 7:if(u&&!(u<=0)){t.next=11;break}return console.warn("Capacity validation failed."),f("Capacity must be at least 1."),t.abrupt("return");case 11:return s={table_name:r,capacity:Number(u)},t.prev=12,console.log("API request to create table:",s),t.next=16,P(s,n.signal);case 16:c=t.sent,console.log("Table created successfully:",c),e.push("/dashboard"),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(12),console.error("Error creating table:",t.t0.message),f(t.t0.message);case 25:return t.abrupt("return",(function(){return n.abort()}));case 26:case"end":return t.stop()}}),t,null,[[12,21]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"Create New Table"}),Object(o.jsx)(z,{error:v}),Object(o.jsxs)("form",{onSubmit:x,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"table_name",children:"Table Name:"}),Object(o.jsx)("input",{id:"table_name",name:"table_name",type:"text",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Enter Table Name",required:!0,minLength:2})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"capacity",children:"Capacity:"}),Object(o.jsx)("input",{id:"capacity",name:"capacity",type:"number",value:u,onChange:function(e){return b(e.target.value)},placeholder:"Enter Capacity",required:!0,min:1})]}),Object(o.jsxs)("div",{className:"buttons d-flex justify-content-between",children:[Object(o.jsx)("button",{className:"btn btn-outline-dark w-100",type:"button",onClick:function(){return e.goBack()},children:"Cancel"}),Object(o.jsx)("button",{className:"btn submit-button w-100 ml-2",type:"submit",children:"Submit"})]})]}),Object(o.jsx)(z,{error:v}),v&&Object(o.jsx)("div",{className:"alert alert-danger mt-2",children:v})]})};var ce=function(){return Object(o.jsx)("div",{className:"NotFound",children:Object(o.jsx)("h1",{children:"Not Found"})})};var ie=function(){return Object(o.jsxs)(i.d,{children:[Object(o.jsx)(i.b,{exact:!0,path:"/",children:Object(o.jsx)(i.a,{to:"/dashboard"})}),Object(o.jsx)(i.b,{exact:!0,path:"/dashboard",children:Object(o.jsx)(Y,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/new",children:Object(o.jsx)(ae,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/edit",children:Object(o.jsx)(ne,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/seat",children:Object(o.jsx)(re,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/tables/new",children:Object(o.jsx)(se,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/search",children:Object(o.jsx)(Q,{})}),Object(o.jsx)(i.b,{children:Object(o.jsx)(ce,{})})]})};a(35);var le=function(){return Object(o.jsx)("div",{className:"container-fluid",children:Object(o.jsxs)("div",{className:"row h-100",children:[Object(o.jsx)("div",{className:"col-md-2 side-bar",children:Object(o.jsx)(u,{})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsx)(ie,{})})]})})};var oe=function(){return Object(o.jsx)(i.d,{children:Object(o.jsx)(i.b,{path:"/",children:Object(o.jsx)(le,{})})})};c.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(l.a,{basename:"/",children:Object(o.jsx)(oe,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.eb56c88c.chunk.js.map